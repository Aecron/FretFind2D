<html>
<head>
<!-- Copyright (C) 2004, 2010 Aaron C Spike -->
<title>FretFind2D</title>
<meta name="keywords" lang="en" content="FretFind, stringed instrument, luthier, fret, guitar, fret placement calculator" />
<meta name="description" lang="en" content="FretFind2d models fretboards as a system of line segments on a two dimensional plane to design freboards with multiple scale lenghts and microtonal scales." />
<link rel="stylesheet" type="text/css" href="fretfind.css" />
<script type="text/javascript" src="libs/jquery-1.4.2.js"></script>
<script type="text/javascript" src="fretfind.js"></script>
<script type="text/javascript">
//<![CDATA[
var processChanges = false;
var onChange = function() {
    if (processChanges) {
        
    }
}
var getAlt = function(id) {
    return $('#'+id).find('dt.selected-alt').attr('id');
}
var getStr = function(id) {
    return document.getElementById(id).value;
}
var getFlt = function(id) {
    return parseFloat(document.getElementById(id).value);
}
var getInt = function(id) {
    return parseInt(document.getElementById(id).value);
}
var getTuning = function() {
    var tunings = [];
    $('#tuning > input:text').each(function(_,item){tunings.push(parseInt(item.value));});
    return tunings;
}
var setTuning = function() {
    var strings = getInt('inputStrings');
    var tunings = getTuning();
    output = '';
    for (var i=0; i<strings; i++) {
        output += 'string '+(i+1)+': <input type="text" value="'+(tunings[i] || 0)+'" /><br />';
    }
    $('#tuning').html(output);
    $('#tuning > input:text').change(onChange);
}

$(document).ready(function() {

    //create help links for each element in the help class 
    //append to previous sibling dt
    $('dd.help').prev().prev().
        append(' [<a class="help" href="#">?</a>]').
        find('a.help').toggle(
            function(){$(this).parent().next().next().css('display','block');},
            function(){$(this).parent().next().next().css('display','none');}
        );
    //create alternative switches
    $('dl.alternative').each(function(_,item){
        $(item).children('dt').each(function(_,jtem){
            var alt = $(jtem).next();
            $(jtem).click(function(){
                //visual que for selected
                $(this).parent().children('dt').removeClass('selected-alt');
                $(this).addClass('selected-alt');
                //display selected dd
                $(this).parent().children('dd').css('display','none');
                alt.css('display','block');
                onChange();
            });
        });
        //reorder dt to top
        $(item).children('dt').prependTo($(item));
        //initialize first as selected
        $(item).children('dt').first().click();
    });
    
    $('#inputStrings').change(setTuning);
    $('#worksheet').find('input, textarea').change(onChange);
    setTuning();
    processChanges = true;
    onChange();
});

//]]>
</script>
</head>
<body>
<h1>FretFind2D</h1>
<p>
FretFind2D is a two dimensional fretboard design tool.
FretFind2D doesn't just calculate fret spacing. 
It models the entire fretboard, strings and frets, 
as a system of line segments on a two dimensional plane.
Because of this approach, it can design fretboards for instruments with 
multiple scale lengths and non-parallel frets 
as well as fretboards for instruments that play just or meantone scales.
FretFind2d uses the 
<a href="http://www.xs4all.nl/~huygensf/scala/scl_format.html">Scala Scale File Format</a> 
for defining just or meantone scales.
PDFs are generated with <a href="http://snapshotmedia.co.uk/uncategorized/jspdf">jsPDF</a>.
</p>
<dl id="worksheet">
    <dt>scale length</dt>
    <dd>
        <dl id="length" class="alternative">
            <dt id="single">single</dt>
            <dd>
                <dl>
                    <dt>fundamental scale length</dt>
                    <dd><input type="text" id="inputScale" value="25" /></dd>
                    <dd class="help">
                        The fundamental scale length is the length of a line drawn from 
                        the middle of the nut to the middle of the bridge. 
                        In this FretFind frontend that line is the perpendicular 
                        bisector of both the nut and the bridge.
                        I call this length "fundamental" because the on a standard instrument 
                        with a narrow nut and a wide bridge the outer strings
                        actaually have a slightly longer scale length.
                    </dd>
                </dl>
            </dd>
            <dt id="multiple">multiple</dt>
            <dd>
                <dl>
                    <dt>first string scale length</dt>
                    <dd><input type="text" id="inputScaleF" value="25" /></dd>
                    <dd class="help">
                        The scale length is the playing/speaking length of the 
                        string measured from the nut to the bridge. 
                        It is perhaps more properly twice the distance from the nut to the octave fret. 
                        Enter the actual scale length of the first (traditional high E) string. 
                    </dd>
                    <dt>last string scale length</dt>
                    <dd><input type="text" id="inputScaleL" value="28" /></dd>
                    <dd class="help">
                        The scale length is the playing/speaking length of the 
                        string measured from the nut to the bridge. 
                        It is perhaps more properly twice the distance from the nut to the octave fret. 
                        Enter the actual scale length of the last (traditional low E) string. 
                    </dd>
                    <dt>perpendicular fret distance</dt>
                    <dd><input type="text" id="inputPerp" value="0.5" /></dd>
                    <dd class="help">
                        <p>
                        The perpendicular fret distance
                        is the ratio of distances along the first and last 
                        string that fall on a line perpendicular to the midline of the neck. 
                        This is used to control the angle of the nut/frets/bridge. 
                        </p>
                        <p>
                        Traditionally this property of non-parallelly fretted 
                        fretboards is measured by assigning a "perpendicular fret".
                        "Perpendicular distance" avoids two problems with the "perpendicular fret" method. 
                        First, it is possible that no fret falls into this perpendicular position. 
                        With "perpendicular distance" we avoid fractional frets.
                        Second, it is possible and even likely with non-equal temperament fretboards that 
                        as a fret crosses the fretboard it will fall at different ratios along the strings. 
                        With "perpendicular distance" we aviod complex calculations 
                        and have more predictible results.
                        </p>
                        <p>
                        A value of 0 results in a perpendicular nut. 
                        A value of 1 results in a perpendicular bridge.
                        The default 0.5 results in a perpendicular octave fret.
                        To calculate an appropriate value for any fret,
                        simply divide the distance of the fret from the nut by the total length of the string.
                        In twelve tone equal temperament the values look like this:
                        <pre>
Fret	P.D.		Fret	P.D.
1	0.05613		13	0.52806
2	0.10910		14	0.55455
3	0.15910		15	0.57955
4	0.20630		16	0.60315
5	0.25085		17	0.62542
6	0.29289		18	0.64645
7	0.33258		19	0.66629
8	0.37004		20	0.68502
9	0.40540		21	0.70270
10	0.43877		22	0.71938
11	0.47027		23	0.73513
12	0.50000		24	0.75000
                        </pre>
                        </p>
                    </dd>
                </dl>
            </dd>
        </dl>
    </dd>
    <dt>string width at the nut</dt>
    <dd><input type="text" id="inputNutWidth" value="1.375" /></dd>
    <dd class="help">
        The string width at the nut is the distance along the nut from the center 
        of the first string to the center of the last string. (Please note, FretFind will space 
        the remaining strings equally between these two points. Custom string spacings 
        can be achieved with FretFind using the advanced frontend.)
    </dd>
    <dt>string width at the bridge</dt>
    <dd><input type="text" id="inputBridgeWidth" value="2.125" /></dd>
    <dd class="help">
        The string width at the bridge is the distance along the bridge from the center 
        of the first string to the center of the last string. (Please note, FretFind will space 
        the remaining strings equally between these two points. Custom string spacings 
        can be achieved with FretFind using the advanced frontend.)
    </dd>
    <dt>fretboard overhang</dt>
    <dd>
        <dl id="overhang" class="alternative">
            <dt id="equal">equal</dt>
            <dd><input type="text" id="inputOverhangE" value="0.09375" /></dd>
            <dt id="nutbridge">nut &amp; bridge</dt>
            <dd>
                <table>
                <tr><td>nut</td><td>
                <input type="text" id="inputOverhangN" value="0.09375" />
                </td></tr>
                <tr><td>bridge</td><td>
                <input type="text" id="inputOverhangB" value="0.09375" />
                </td></tr>
                </table>
            </dd>
            <dt id="firstlast">first &amp; last</dt>
            <dd>
                <table>
                <tr><td>last</td><td>first</td></tr>
                <tr><td>
                <input type="text" id="inputOverhangL" value="0.09375" />
                </td><td>
                <input type="text" id="inputOverhangF" value="0.09375" />
                </td></tr>
                </table>
            </dd>
            <dt id="all">all</dt>
            <dd>
                <table>
                <tr><td> </td><td>last</td><td>first</td></tr>
                <tr><td>nut</td><td>
                <input type="text" id="inputOverhangNL" value="0.09375" />
                </td><td>
                <input type="text" id="inputOverhangNF" value="0.09375" />
                </td></tr>
                <tr><td>bridge</td><td>
                <input type="text" id="inputOverhangBL" value="0.09375" />
                </td><td>
                <input type="text" id="inputOverhangBF" value="0.09375" />
                </td></tr>
                </table>
            </dd>
        </dl>
    <dd class="help">
        The fretboard overhang is the distance from the center of outer strings to edge of nut or bridge. 
        There are four input modes for overhang. Equal: you enter a single value and the overhang will be constant.
        Nut &amp; Bridge: allows you to specify one overhang at the nut and another overhang at the bridge.
        First &amp; Last: allows you to specify one overhang for the first string and another for the last string.
        All: you specify an overhang for all four locations seperately.
        (Please note, in FretFind the first string is shown on the far right 
        where the high E string would be on a typical right-handed guitar. 
        The last string is on the far left, where the low E would be found.)
    </dd>
    <dt>calculation method</dt>
    <dd>
        <dl id="scale" class="alternative">
            <dt id="et">equal (root 2)</dt>
            <dd><input type="text" id="inputCalcR" value="12" /></dd>
            <dt id="scala">just (scala)</dt>
            <dd>
<textarea rows="17" id="inputCalcS">
! 12tet.scl
!
12 tone equal temperament
 12
!
 100.0
 200.
 300.
 400.
 500.
 600.
 700.
 800.
 900.
 1000.
 1100.
 2/1
</textarea>            
            </dd>
        </dl>
    </dd>
    <dd class="help">
        The calculation method determins how FretFind calculates fret placement.
        There are two input modes. Equal: uses the X<sup>th</sup> root of two, a standard
        method for calculating equal temperaments. You enter the number of tones per octave.
        Scala: uses a Scala SCL file which allows you to specify 
        each scale step exactly in either ratios or cents. 
        If you are interested in creating your own scale, please read this description of the 
        <a href="http://www.xs4all.nl/~huygensf/scala/scl_format.html">Scala scale file format</a>.
        Otherwise try a scale from the Scala scale archive, found at the very bottom of the 
        <a href="http://www.xs4all.nl/~huygensf/scala/downloads.html">Scala download page</a>.
        You can learn more about Scala at the 
        <a href="http://www.xs4all.nl/~huygensf/scala/index.html">Scala home page</a>.
    </dd>
    <dt>number of frets</dt>
    <dd><input type="text" id="inputFrets" value="24" /></dd>
    <dd class="help">
        This is the number of frets you would like FretFind to calculate.
        The number of frets must be an integer. 
    </dd>
    <dt>number of strings</dt>
    <dd><input type="text" id="inputStrings" value="6" /></dd>
    <dd class="help">
        The number of strings must be an integer. 
        If you change the number of strings click "Update" to update the tuning section below.
    </dd>
    <dt>tuning</dt>
    <dd id="tuning">
    </dd>
    <dd class="help">
        Enter the scale step (of the scale defined above) to which each string will be tuned.
        For example a standard guitar in the key of E would be tuned 0, 7, 3, 10, 5, 0.
        The first string is the string to the far right on the fretboard.
        This step is not important for the Equal calculation method.
        Entering a tuning for the Scala calculation method will very likely result in partial frets.
    </dd>
</dl><!-- worksheet -->
</body>
</html>

